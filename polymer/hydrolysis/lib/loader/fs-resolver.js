"use strict";var fs=require("fs");var path=require("path");var url=require("url");function getFile(e,r){fs.readFile(e,"utf-8",function(e,i){if(e){r.reject(e)}else{r.resolve(i)}})}function isSiblingOrAunt(e,r){var i=path.dirname(e);if(r.indexOf(e)===-1&&r.indexOf(i)===0){return true}return false}function redirectSibling(e,r,i){var t=path.dirname(e);var n=path.join(e,i,r.slice(t.length));return n}function FSResolver(e){this.config=e||{}}FSResolver.prototype={accept:function(e,r){var i=url.parse(e);var t=this.config.host;var n=this.config.basePath;var a=this.config.root&&path.normalize(this.config.root);var o=this.config.redirect;var f;if(!i.hostname||i.hostname===t){f=i.pathname}if(f){if(n){f=path.relative(n,f)}if(a){f=path.join(a,f)}if(o&&isSiblingOrAunt(a,f)){f=redirectSibling(a,f,o)}getFile(f,r);return true}return false}};module.exports=FSResolver;