"use strict";var Promise=global.Promise||require("es6-promise").Promise;function Deferred(){var e=this;this.promise=new Promise(function(r,s){e.resolve=r;e.reject=s})}function FileLoader(){this.resolvers=[];this.requests={}}FileLoader.prototype={addResolver:function(e){this.resolvers.push(e)},request:function(e){var r;if(!(e in this.requests)){var s=false;var i=new Deferred;this.requests[e]=i;for(var o=this.resolvers.length-1,t;o>=0;o--){t=this.resolvers[o];if(t.accept(e,i)){s=true;break}}if(!s){i.reject("no resolver found")}r=i.promise}else{r=this.requests[e].promise}return r}};module.exports=FileLoader;