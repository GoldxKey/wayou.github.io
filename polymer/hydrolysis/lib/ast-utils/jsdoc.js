"use strict";var JsdocTag;var JsdocAnnotation;var IS_TAG_LINE=/^[ \t]*@/;var DOC_SPLITTER=/(?=[ \t]*\*?[ \t]?@)/;function parseJsdoc(n){var t=null;var r=[];function a(n){if(n==="")return;if(t===null&&!IS_TAG_LINE.test(n)){t=n}else{r=r.concat(parseTag(n))}}var e="";n.split(/\r?\n/).forEach(function(n){n=_stripPrefix(n);if(IS_TAG_LINE.test(n)){a(e);e=""}e=e+(e&&"\n"||"")+n});a(e);t=unindent(t);return{body:t===""?null:t,tags:r}}function _stripPrefix(n){var t=n.match(/^[ \t]*\*(.*)$/);if(!t)return n;return t[1]}var SPLIT_BLOCK_TAGS=/^[ \t]*(@\S+(?:[\s\n]+@\S+)*)+([\s\S]*)$/m;var BLOCK_TAG_CONTENT=/^(?:[\s\n]+\{(.*)\})?(?:[\s\n]+(\S+))?(?:[\s\n]+([\s\S]*))?$/m;function parseTag(n){var t=n.match(SPLIT_BLOCK_TAGS);var r=t[1].split(/[\s\n]+/m).map(function(n){return n.substr(1)});var a=t[2];var e=a.match(BLOCK_TAG_CONTENT);return r.map(function(n){return{tag:n,type:e[1]||null,name:e[2]||null,body:e[3]||null}})}function hasTag(n,t){if(!n||!n.tags)return false;return n.tags.some(function(n){return n.tag===t})}function getTag(n,t,r){if(!n||!n.tags)return false;for(var a=0;a<n.tags.length;a++){var e=n.tags[a];if(e.tag===t){return r?e[r]:e}}return null}function unindent(n){if(!n)return n;var t=n.replace(/\t/g,"  ").split("\n");var r=t.reduce(function(n,t){if(/^\s*$/.test(t))return n;var r=t.match(/^(\s*)/)[0].length;if(n===null)return r;return r<n?r:n},null);return t.map(function(n){return n.substr(r)}).join("\n")}module.exports={getTag:getTag,hasTag:hasTag,parseJsdoc:parseJsdoc,parseTag:parseTag,unindent:unindent};